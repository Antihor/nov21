{"version":3,"file":"index.js","sources":["../src/js/pixabay.js","../src/js/render.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, currentPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '42059071-0978dc0d7158b742eee7c30f5';\n  const params = {\n    per_page: 15,\n    page: currentPage,\n  };\n\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","function templateImg(hit) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = hit;\n  return `<a href=\"${largeImageURL}\" class=\"gallery-link\"><li class=\"gallery-item\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n          <p><b>Likes:</b> ${likes}</p>\n          <p><b>Views:</b> ${views}</p>\n          <p><b>Comments:</b> ${comments}</p>\n          <p><b>Downloads:</b> ${downloads}</p>\n          </li></a>`;\n}\n\nexport function createGallery(hits) {\n  return hits.map(templateImg).join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay';\nimport { createGallery } from './js/render';\n\nconst formRef = document.querySelector('.form');\nconst buttRef = document.querySelector('.btn');\nconst galRef = document.querySelector('.gallery');\nconst moreRef = document.querySelector('.load');\nconst loaderRef = document.querySelector('.loader');\n\nlet query;\nlet page;\nlet lastPage;\n\nformRef.addEventListener('submit', onSubmit);\n\nasync function onSubmit(ev) {\n  ev.preventDefault();\n\n  query = ev.target.elements.query.value.trim();\n  page = 1;\n  loaderOn;\n  if (!query) {\n    showError('Emty field');\n    ev.target.reset();\n    return;\n  }\n\n  try {\n    const data = await fetchImages(query, page);\n    if (data.hits.length === 0) {\n      showError('Sorry, no matches found. Please, try another query');\n      ev.target.reset();\n      return;\n    }\n    lastPage = Math.ceil(data.total / 15);\n\n    galRef.innerHTML = '';\n\n    renderImages(data.hits);\n  } catch (err) {\n    showError(err);\n    lastPage = 0;\n    galRef.innerHTML = '';\n  }\n  loaderOff();\n  checkMore();\n\n  ev.target.reset();\n  showMore();\n}\n\nmoreRef.addEventListener('click', onMore);\n\nasync function onMore() {\n  page += 1;\n  loaderOn();\n  const data = await fetchImages(query, page);\n  renderImages(data.hits);\n  loaderOff();\n  checkMore();\n}\n\nfunction renderImages(hits) {\n  const markup = createGallery(hits);\n  galRef.insertAdjacentHTML('beforeend', markup);\n}\nfunction showMore() {\n  moreRef.classList.remove('hidden');\n}\n\nfunction hideMore() {\n  moreRef.classList.add('hidden');\n}\n\nfunction checkMore() {\n  if (page >= lastPage) {\n    hideMore();\n  } else {\n    showMore();\n  }\n}\nfunction loaderOn() {\n  loaderRef.classList.remove('hidden');\n}\n\nfunction loaderOff() {\n  loaderRef.classList.add('hidden');\n}\nfunction showError(msg) {\n  iziToast.error({\n    title: 'Error!',\n    message: msg,\n    position: 'center',\n  });\n}\n"],"names":["fetchImages","query","currentPage","BASE_URL","API_KEY","params","url","axios","templateImg","hit","largeImageURL","webformatURL","tags","likes","views","comments","downloads","createGallery","hits","formRef","galRef","moreRef","loaderRef","page","lastPage","onSubmit","ev","showError","data","renderImages","err","loaderOff","checkMore","showMore","onMore","loaderOn","markup","hideMore","msg","iziToast"],"mappings":"6vBAEO,eAAeA,EAAYC,EAAOC,EAAa,CACpD,MAAMC,EAAW,2BACXC,EAAU,qCACVC,EAAS,CACb,SAAU,GACV,KAAMH,CACV,EAEQI,EAAM,GAAGH,CAAQ,QAAQC,CAAO,MAAM,mBAC1CH,CACD,CAAA,2DAGD,OADY,MAAMM,EAAM,IAAID,EAAK,CAAE,OAAAD,CAAM,CAAE,GAChC,IACb,CChBA,SAASG,EAAYC,EAAK,CACxB,KAAM,CACJ,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO,YAAYC,CAAa;AAAA,4CACUC,CAAY,UAAUC,CAAI;AAAA,6BACzCC,CAAK;AAAA,6BACLC,CAAK;AAAA,gCACFC,CAAQ;AAAA,iCACPC,CAAS;AAAA,oBAE1C,CAEO,SAASC,EAAcC,EAAM,CAClC,OAAOA,EAAK,IAAIV,CAAW,EAAE,KAAK,EAAE,CACtC,CCfA,MAAMW,EAAU,SAAS,cAAc,OAAO,EAC9B,SAAS,cAAc,MAAM,EAC7C,MAAMC,EAAS,SAAS,cAAc,UAAU,EAC1CC,EAAU,SAAS,cAAc,OAAO,EACxCC,EAAY,SAAS,cAAc,SAAS,EAElD,IAAIrB,EACAsB,EACAC,EAEJL,EAAQ,iBAAiB,SAAUM,CAAQ,EAE3C,eAAeA,EAASC,EAAI,CAM1B,GALAA,EAAG,eAAc,EAEjBzB,EAAQyB,EAAG,OAAO,SAAS,MAAM,MAAM,OACvCH,EAAO,EAEH,CAACtB,EAAO,CACV0B,EAAU,YAAY,EACtBD,EAAG,OAAO,QACV,MACD,CAED,GAAI,CACF,MAAME,EAAO,MAAM5B,EAAYC,EAAOsB,CAAI,EAC1C,GAAIK,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAU,oDAAoD,EAC9DD,EAAG,OAAO,QACV,MACD,CACDF,EAAW,KAAK,KAAKI,EAAK,MAAQ,EAAE,EAEpCR,EAAO,UAAY,GAEnBS,EAAaD,EAAK,IAAI,CACvB,OAAQE,EAAK,CACZH,EAAUG,CAAG,EACbN,EAAW,EACXJ,EAAO,UAAY,EACpB,CACDW,IACAC,IAEAN,EAAG,OAAO,QACVO,GACF,CAEAZ,EAAQ,iBAAiB,QAASa,CAAM,EAExC,eAAeA,GAAS,CACtBX,GAAQ,EACRY,IACA,MAAMP,EAAO,MAAM5B,EAAYC,EAAOsB,CAAI,EAC1CM,EAAaD,EAAK,IAAI,EACtBG,IACAC,GACF,CAEA,SAASH,EAAaX,EAAM,CAC1B,MAAMkB,EAASnB,EAAcC,CAAI,EACjCE,EAAO,mBAAmB,YAAagB,CAAM,CAC/C,CACA,SAASH,GAAW,CAClBZ,EAAQ,UAAU,OAAO,QAAQ,CACnC,CAEA,SAASgB,GAAW,CAClBhB,EAAQ,UAAU,IAAI,QAAQ,CAChC,CAEA,SAASW,GAAY,CACfT,GAAQC,EACVa,IAEAJ,GAEJ,CACA,SAASE,GAAW,CAClBb,EAAU,UAAU,OAAO,QAAQ,CACrC,CAEA,SAASS,GAAY,CACnBT,EAAU,UAAU,IAAI,QAAQ,CAClC,CACA,SAASK,EAAUW,EAAK,CACtBC,EAAS,MAAM,CACb,MAAO,SACP,QAASD,EACT,SAAU,QACd,CAAG,CACH"}